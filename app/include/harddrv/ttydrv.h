#ifndef _TTYDRV_H_
#define _TTYDRV_H_

#include "serial.h"

//系统串口类型定义
#define M5234_UART		0

typedef void  (*TFuncInit)();
typedef DWORD (*TFuncChan)(WORD , TSerialMap *);
typedef DWORD (*TFuncWB)(WORD, BYTE);
typedef DWORD (*TFuncW)(WORD);
typedef BOOL  (*TFuncWBPDPD)(WORD , BYTE , DWORD *, DWORD *);
typedef BOOL  (*TFuncWB2)(WORD, BYTE);

/*----------------------------------------------------------------------------------------*/
/* 定义串口操作函数表														              */
/*----------------------------------------------------------------------------------------*/
struct TSerialFunc{
	TFuncInit	pInit;					/*驱动程序初始化*/
	TFuncChan	pOpen;					/*打开串口*/
	TFuncWB		pRxdCtr;				/*禁止/打开芯片接收功能*/
	TFuncWB		pTxdCtr;				/*禁止/打开串口的发送功能*/
	TFuncWBPDPD	pIOCtl;					/*串口控制*/
	TFuncWB2	pWriteData;				/*向芯片直接写数据*/
};


/*************************************************************************************
* 串口物理通道初始化                                                          
*************************************************************************************/
void SerialInit();

/*************************************************************************************
* 串口物理通道打开                                                          
*************************************************************************************/
DWORD SerialOpen(WORD wPort);

/*************************************************************************************
* 串口物理通道接收控制                                                          
*************************************************************************************/
DWORD SerialRxdCtr(WORD wPort, BYTE bFlag);

/*************************************************************************************
* 串口物理通道发送控制                                                          
*************************************************************************************/
DWORD SerialTxdCtr(WORD wPort, BYTE bFlag);

/*************************************************************************************
* 串口物理通道一般输入输出控制                                                          
*************************************************************************************/
BOOL SerialIOCtl(WORD wPort, BYTE Cmd, DWORD *pdwPar1, DWORD *pdwPar2);

/*************************************************************************************
* 向串口物理通道写入一个字节，以触发串口发送中断                                                         
*************************************************************************************/
BOOL  WriteAChar(WORD wPort, BYTE bData);

/*************************************************************************************
* 复位串口物理通道                                                        
*************************************************************************************/
void ResetComm(WORD wPort);

/*************************************************************************************
* 取串口物理通道的映射表                                                        
*************************************************************************************/
TSerialMap GetSerialMap(WORD wPort);

#endif
